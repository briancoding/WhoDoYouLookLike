<!DOCTYPE html>
<html>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
            crossorigin="anonymous"
        />

        <title>내가 주인공이라면</title>
        <link rel="stylesheet" href="style.css" />
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145482737-6"></script>
        <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-145482737-6');
    </script>
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ffade55267402d0"></script>

    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-light nav-distance">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">미드상 테스트</a>
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarNav"
                    aria-controls="navbarNav"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="https://heybrian.netlify.app/">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.youtube.com/channel/UCQNE2JmbasNYbjGAcuBiRRg">JoCoding</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="ad-up">
            <ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-5O2FxtnT4PE1ExvX" 
 data-ad-width   = "320" 
 data-ad-height  = "100"></ins> 
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
        </div>
        <section class="section">
            <h1 class="title">미국드라마 주인공 테스트</h1>
            <h2 class="subtitle">내가 미드 스타라면?</h2>
        </section>
        <h3 class="sub-sub pb-1 d-flex justify-content-center">여주 or 남주? 되고싶은 성별 선택!</h3>
        <section class="sub-sub-sub d-flex justify-content-center">
            <p class="passage d-flex align-item-center pr-3">여주</p>
            <div class="checking">
                <input type="checkbox" id="gender">
                <label for="gender">
                    <span class="knob">
                        <i></i>
                    </span>
                </label>
            </div>
            <p class="passage d-flex align-items-center pl-3">남주</p>
        </section>
        <script
            class="jsbin"
            src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"
        ></script>
        <div class="container file-upload">
            <div class="image-upload-wrap">
                <input
                    class="file-upload-input"
                    type="file"
                    onchange="readURL(this);"
                    accept="image/*"
                />
                <div class="drag-text">
                    <h3>여기에 사진을 업로드해주세요.</h3>
                </div>
            </div>
            <div class="file-upload-content">
                <img class="file-upload-image" id="face-image" src="#" alt="your image" />
                <div id="loading" class="animated bounce">
                <div class="spinner-border" role="status">
                    <span class="sr-only">1초만..</span>
                </div>
                <p class="text-center">주인공 빙의중..</p>
            </div>
                <p class="result-message"></p>
                <div id="label-container"></div>
                
                <!-- Go to www.addthis.com/dashboard to customize your tools -->
                <div class="addthis_inline_share_toolbox"></div>
            
                <div class="image-title-wrap">
                    <button type="button" onclick="removeUpload()" class="remove-image">
                        별론데...재시도!
                    </button>
                </div>
            </div>
        </div>
        <div class="ad">
          <ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-jAYVuNayu4V3ZzsJ" 
 data-ad-width   = "320" 
 data-ad-height  = "100"></ins> 
            <ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-YFPwGYY88l9DYKCl" 
 data-ad-width   = "320" 
 data-ad-height  = "100"></ins> 
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
        </div>
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
         <section class="youtube">
            <div class="youtube-cover d-flex flex-row-reverse">
                <a href="https://www.youtube.com/channel/UCQNE2JmbasNYbjGAcuBiRRg" class="youtube-link">Much help from 조코딩</a>
             </div></section>
        <div id="webcam-container"></div>
        <div id="label-container"></div>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
            integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"
            integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj"
            crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
        <script>
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('.image-upload-wrap').hide();
                        $('#loading').show();
                        $('.file-upload-image').attr('src', e.target.result);
                        $('.file-upload-content').show();

                        $('.image-title').html(input.files[0].name);
                    };

                    reader.readAsDataURL(input.files[0]);
                    init().then(() => {
                        predict();
                        $('#loading').hide();
                    });
                } else {
                    removeUpload();
                }
            }

            function removeUpload() {
                $('.file-upload-input').replaceWith($('.file-upload-input').clone());
                $('.file-upload-content').hide();
                $('.image-upload-wrap').show();
            }
            $('.image-upload-wrap').bind('dragover', function () {
                $('.image-upload-wrap').addClass('image-dropping');
            });
            $('.image-upload-wrap').bind('dragleave', function () {
                $('.image-upload-wrap').removeClass('image-dropping');
            });
        </script>
        <script type="text/javascript">
            // More API functions here:
            // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

            // the link to your model provided by Teachable Machine export panel
            let URL;
            const urlFemale = "https://teachablemachine.withgoogle.com/models/96X4AchAe/";
            const urlMale = "https://teachablemachine.withgoogle.com/models/nZ5TeJZ7f/";

            let model, webcam, labelContainer, maxPredictions;

            // Load the image model and setup the webcam
            async function init() {
                if (document.getElementById("gender").checked){
                    URL= urlMale;
                } else {     
                    URL= urlFemale;
                }
                const modelURL = URL + "model.json";
                const metadataURL = URL + "metadata.json";

                // load the model and metadata
                // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
                // or files from your local hard drive
                // Note: the pose library adds "tmImage" object to your window (window.tmImage)
                model = await tmImage.load(modelURL, metadataURL);
                maxPredictions = model.getTotalClasses();
                labelContainer = document.getElementById('label-container');
                for (let i = 0; i < maxPredictions; i++) {
                    // and class labels
                   return maxPredictions;
                }
            }

            // run the webcam image through the image model
            async function predict() {
                // predict can take in an image, video or canvas html element

                var image = document.getElementById('face-image');
                const prediction = await model.predict(image, false);
                prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
                console.log(prediction[0].className);
                var resultMessage;
                if(document.getElementById("gender").checked){
                    gtag('event', '미드 주인공 테스트 수행',{
                        'event_category': '미드 주인공 테스트 수행',
                        'event_label': '남자'
                    });
                switch (prediction[0].className) {
                    case "대니엘 험프리":
                        resultMessage= "가십걸의 댄 험프리!<br>아싸..<br>어딜가든 누구도 관심없는 댄.그런데 또 친구들은 다들 쌉인싸다.아싸를 가장한 진정한 인싸인 댄 험프리를 닮았네요. 어른스러운것 같으면서도 속좁고 남들에 관심없는척하면서 모든 것을 옅보고 있었던 가십걸의 본체. <br>특징:xoxo.Gossip girl";
                        gtag('event', '남자 결과 대니엘 험프리', {'event_category': '남자 결과'});
                        break;
                    case "존 스노우":
                        resultMessage= "왕좌의 게임의 존 스노우!<br>you know nothing, John snow <br>스타크가의 사생아..인줄 알았으나 타게리언가의 핏줄이였다.주인공 특유의 답답함과 세상돌아가는 정보에 어두움을 겸비하고 있는 존스노우. 정의로운성격으로 북부의 세력을 규합하여 7가문의 전쟁을 끝내는 존을 닮았네요! <br>특징:진짜 아무것도 모름..";
                        gtag('event', '남자 결과 존 스노우', {'event_category': '남자 결과'});
                        break;
                    case "노아 플린":
                        resultMessage= "키싱부스의 노아 플린!<br>모든이들의 관심을 한몸에 받는 노아플린. 훤칠한 키와 근육질 몸은 물론 하버드까지..모든것을 갖춘 끝판왕이다. 결점이 있다면 약간의 바람끼와 빡치면 바로 주먹이 날아가는 싸움꾼이라는 점. 혹시 이부분만 닮은건 아니죠?<br>특징: 약간의 분노조절장애, 윗통까기";
                        gtag('event', '남자 결과 노아 플린', {'event_category': '남자 결과'});
                        break;
                    case "오티스 밀번":
                        resultMessage= "오티스의 비밀상담소의 오티스 밀번! <br> 트라우마에 빠져 성욕구해소에 문제가있는 불쌍한 주인공. 앞에나서기를 두려워하고 조용조용 나름 잘지내는 오티스를 닮았군요. 소심하긴해도 남들의 이야기를 잘들어주고 배려심이 많은 오티스.<br>특징:ㅠㅠ";
                        gtag('event', '남자 결과 오티스 밀번', {'event_category': '남자 결과'});
                        break;
                    case "노아 센티네오":
                        resultMessage= "내가 사랑했던 모든 남자들에게의 피터 카빈스키!<br>잘생긴 외모에 친절한 성격을 가진 노아 센티네오를 닮았군요. 강아지를 닮은 외모로 인기가 많을것 같아요! <br>특징:위장연애하다가 진짜로 사귀기";
                        gtag('event', '남자 결과 노아 센티네오', {'event_category': '남자 결과'});
                        break
                    case "토니 스토넴":
                        resultMessage="스킨스의 토니 스토넴!<br>공부,얼굴,연기,노래까지 어느것 하나 못하는게 없는 완소남. 사람들을 자기 멋대로 이용하고 상황을 쥐락펴락하는 걸 즐기는 토니를 닮았네요.<br>특징: 잘생긴 싸가지";
                        gtag('event', '남자 결과 토니 스토넴', {'event_category': '남자 결과'});
                        break;
                    default:
                        resultMessage='알수없음';
                        gtag('event', '남자 결과 알수없음', {'event_category': '남자 결과'});
                  }
                } else {
                    gtag('event', '미드 주인공 테스트 수행',{
                        'event_category': '미드 주인공 테스트 수행',
                        'event_label': '여자'
                    });
                switch (prediction[0].className) {
                    case "세레나 벤더 우드슨":
                        resultMessage= "가십걸의 세레나 벤더 우드슨!<br>퀸카중의 퀸카<br>숨만쉬어도 모두를 돌아보게하 존재감을 가진 그녀. 그녀의 어퍼이스트사이드 귀환은 엄청난 화제가 된다. 어딜가든 이슈를 몰고 다니는 뉴욕 상류층 최고의 퀸카 세레나를 닮았네요! <br>특징:모든사건의 발단되버리기";
                        gtag('event', '여자 결과 세레나 벤더 우드슨', {'event_category': '여자 결과'});
                        break;
                    case "블레어 월도프":
                        resultMessage= "가십걸의 블레어 월도프!<br>이구역의 미친X은 나야를 외치던 최고의 하이틴스타! 그녀의 자리를 탐하는 사람들을 지구끝까지 찾아가 응징하는 그녀. 이미 가진것이 많지만 가지고 싶은 것이 더많은 월도프가의 외동딸.<br>자신이 원하는 것을 갖기 위해 어떤일도 마다하지않는 블레어를 닮았네요. 당신도 블레어처럼 최고의 패셔니스타인가요? <br>특징:언행일치-이구역의 진정한 미친X!";
                        gtag('event', '여자 결과 블레어 월도프', {'event_category': '여자 결과'});
                        break;
                    case "대너리스 타게리언":
                        resultMessage= "왕좌의 게임의 대너리스 타게리언!<br>드라카리스!<br>타게리언가의 마지막 후계자이자 용들의 어머니. 웨스테로스 대륙의 철왕좌를 차지하기위해 타게리언가의 복수를 위해 떠나는 대너리스를 닮았군요.<br>특징:눈 치켜뜨며 드라카리스 외치기";
                        gtag('event', '여자 결과 대너리스 타게리언', {'event_category': '여자 결과'});
                        break;
                    case "아리아 스타크":
                        resultMessage= "왕좌의 게임의 아리아 스타크!<br>“What do we say to the god of death?” <b>Not today. <br> 어렸을때부터 검술과 사냥에 관심이 많았던 스타크가문의 차녀 아리아스타크.<br> 복수를 위해 죽음을 두려워하지 않는 아리아 스타크를 닮았군요.<br>특징:데스노트 외우기";
                        gtag('event', '여자 결과 아리아 스타크', {'event_category': '여자 결과'});
                        break;
                    case "산사 스타크":
                        resultMessage= "왕좌의 게임의 산사 스타크! <br>Queen in the North <br>세상물정모르는 스타크가문의 장녀였지만 결국 북부의 여왕으로 거듭나는 산사스타크를 닮았군요. <br>특징:모른척하기, 자기주장내세우기";
                        gtag('event', '여자 결과 산사 스타크', {'event_category': '여자 결과'});
                        break;
                    case "엘 에반스":
                        resultMessage="키싱부스의 엘 에반스! <br>Kissing Booth is now open! <br>큰 눈과 또렷한 이목구비가 매력인 엘. 털털하고 유쾌한 성격을 가진 사랑스러운 그녀 엘을 닮았군요.<br>특징:노아몰래 다른남자랑 키스하기";
                        gtag('event', '여자 결과 엘 에반스', {'event_category': '여자 결과'});
                        break;
                    default:
                        resultMessage="알수없음";
                        gtag('event', '여자 결과 알수없음', {'event_category': '여자 결과'});
                  }
                }   
                $('.result-message').html(resultMessage);
                for (let i = 0; i < maxPredictions; i++) {
                    const classPrediction =
                        prediction[i].className + ': ' + prediction[i].probability.toFixed(2);
                    labelContainer.childNodes[i].innerHTML = classPrediction;
                }
            }
        </script>
    </body>
    <!-- Copyright (c) 2021 by Aaron Vanston (https://codepen.io/aaronvanston/pen/yNYOXR)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. 

Copyright (c) 2020 by Mert Cukuren (https://codepen.io/knyttneve/pen/bPpEZY)
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 -->
</html>